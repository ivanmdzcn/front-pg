<div class="header-row">
  <h2>Causantes</h2>

  <div class="search-box">
    <input type="text" [formControl]="search" placeholder="Buscar causante...">
    <span class="icon">ğŸ”</span>
  </div>
</div>

<div *ngIf="loading">Cargando...</div>
<div *ngIf="error" style="color:#b00020">{{ error }}</div>

<table *ngIf="!loading && !error && data.length" class="tabla">
  <thead>
    <tr>
      <th>Caso</th>
      <th>Afiliacion</th>
      <th>Nombre</th>
      <th>Estado</th>
      <th>Fecha Registro</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let c of data">
      <td>{{ c.codigo }}</td>
      <td>{{ c.afi }}</td>
      <td>{{ c.nombreCompleto }}</td>
      <td>
        <span class="badge" [class.ok]="c.estado==='A'" [class.bad]="c.estado!=='A'">
          {{ estadoTexto(c.estado) }}
        </span>
      </td>
      <td>{{ c.fechaRegistro }}</td>

      <td class="col-acciones">
        <div class="acciones">
          <a [routerLink]="['/beneficiarios', c.codigo]" class="btn-benef">ğŸ‘¥</a>
          <a [routerLink]="['/causantes', c.codigo, 'editar']" class="btn-edit">âœï¸</a>
          <button (click)="confirmarEliminar(c.codigo, c.nombreCompleto)" class="btn-delete">ğŸ—‘</button>
        </div>
      </td>

    </tr>
  </tbody>
</table>

<div *ngIf="!loading && !error && !data.length">
  No hay causantes registrados.
</div>